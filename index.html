<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <title>Kube Inspector</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="style.css" rel="stylesheet">
</head>
<body>
  <!-- Loading Spinner Overlay -->
<div id="loaderOverlay">
  <div class="spinner-dots">
    <div></div><div></div><div></div>
  </div>
</div>
<div id="app">
  <div id="sidebar" class="p-3">
    <h5>Namespaces</h5>
    <input id="searchBox" type="text" class="form-control mb-2" placeholder="Digita almeno 2 lettere..." />
    <div id="namespaceList" class="list-group small flex-grow-1"></div>
  </div>

  <div id="resizer"></div>

  <div id="mainArea">
    <button id="toggleBtn" class="btn btn-sm btn-outline-light" onclick="toggleSidebar()">â˜°</button>
    
    <div id="selectedNamespace" class="mb-2"><h3>Seleziona un namespace</h3> </div>

    <div class="d-flex justify-content-between align-items-center mb-2">
      <div id="commandButtons" class="d-flex flex-wrap gap-2"></div>
      <div class="dropdown">
        <button class="btn btn-sm btn-outline-light dropdown-toggle" data-bs-toggle="dropdown">
          Comandi Rapidi
        </button>
        <ul class="dropdown-menu dropdown-menu-dark" id="commandMenu"></ul>
      </div>
    </div>

    <div id="overviewRow" class="overview-dragdrop mb-3"></div>

    <div id="monitorPanel" class="mb-3" style="display:none">
      <div class="card p-3">
        <div class="d-flex justify-content-between">
          <h6 class="m-0">ğŸ“Š Monitoring Tools</h6>
          <button class="btn-close btn-close-white btn-sm" onclick="toggleMonitor()"></button>
        </div>
        <hr class="border-secondary">
        <div class="d-flex flex-wrap gap-2">
          <button class="btn btn-sm btn-outline-info" onclick="openLink('https://grafana.example.com')">Grafana UI</button>
          <button class="btn btn-sm btn-outline-info" onclick="openLink('https://kibana.example.com')">Kibana UI</button>
          <button class="btn btn-sm btn-outline-warning" onclick="runCommand('kubectl get --raw /apis/metrics.k8s.io/v1beta1')">ğŸ“¡ metrics-server</button>
          <button class="btn btn-sm btn-outline-light" onclick="runCommand('curl -I https://grafana.example.com')">curl Grafana</button>
          <button class="btn btn-sm btn-outline-light" onclick="runCommand('curl -I https://kibana.example.com')">curl Kibana</button>
        </div>
      </div>
    </div>

    <div id="output" class="output-box mb-2">
      <button class="btn btn-sm btn-outline-light copy-btn" onclick="copyOutput()">ğŸ“‹ Copia Output</button>
      Output quiâ€¦
    </div>

    <div class="input-group mb-5">
      <input id="customCmd" type="text" class="form-control" value="kubectl get pods -A">
      <button class="btn btn-primary" onclick="runCustomCommand()">Esegui</button>
      <button class="btn btn-success" onclick="saveOutput()">Salva</button>
    </div>
  </div>
</div>

<div id="contextMenu" class="context-menu">
  <button onclick="contextAction('describe')">ğŸ” Describe Pod</button>
  <button onclick="contextAction('logs')">ğŸ“œ Logs</button>
  <button onclick="contextAction('exec')">ğŸ’» Exec (sh)</button>
  <button onclick="contextAction('curl')">ğŸŒ Curl check</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<!-- File JS modulari -->
<script src="js/ui.js"></script>
<script src="js/state.js"></script>
<script src="js/sidebar.js"></script>
<script src="js/commands.js"></script>
<script src="js/contextMenu.js"></script>
<script src="js/output.js"></script>
<script src="js/overview.js"></script>

<script src="js/customCmd.js"></script>
<script src="js/main.ui.js"></script>

</body>
</html>
